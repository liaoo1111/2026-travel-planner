<!DOCTYPE html>
<!-- saved from url=(0014)about:internet -->
<html lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 東北藏王冰雪之旅</title>
    
    <script src="./index_files/saved_resource"></script>
    <link rel="stylesheet" href="./index_files/all.min.css">
    <script src="./index_files/vue.global.js.下載"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'snow-white': '#F0FFFF',        // 雪白色
                        'ice-blue': '#B3E5FC',          // 冰川藍
                        'light-snow-blue': '#E5F3F7',   // 整體背景
                        'deep-sea-blue': '#01579B',     // 深海藍
                        'nav-base': '#CFD8DC',          // 導航圖示底色
                        'nav-arrow': '#01579B',         // 導航箭頭
                        'accent-yellow': '#FFD54F',     // 重點黃
                        'note-yellow': '#FEFCE8',       // 便利貼黃
                        'note-border': '#FEF08A',       // 便利貼邊框
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(179, 229, 252, 0.4)',
                        'float': '0 8px 32px 0 rgba(1, 87, 155, 0.15)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Roboto+Mono:wght@400;500;700&display=swap');
        
        body {
            background-color: #E5F3F7;
            -webkit-tap-highlight-color: transparent;
            font-family: 'Noto Sans TC', sans-serif;
            color: #334155;
        }
        
        .app-container {
            max-width: 480px;
            margin: 0 auto;
            min-height: 100vh;
            background-color: #ffffff;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.05);
            position: relative;
            padding-bottom: 20px;
        }
        /* --- Header Design --- */
        .header-bg {
            background-color: #ffffff;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-bottom-left-radius: 40px;
            border-bottom-right-radius: 40px;
            z-index: 10;
            height: 250px; /* 已調整為 250px */
        }
        
        .header-image-container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        
        .header-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        /* 漸層遮罩 */
        .header-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(1, 87, 155, 0.3) 0%, transparent 60%);
        }
        /* 雪花特效 */
        .snow-layer {
            position: absolute;
            inset: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="1" fill="white" opacity="0.8"/><circle cx="20" cy="80" r="0.8" fill="white" opacity="0.6"/><circle cx="80" cy="20" r="1.2" fill="white" opacity="0.9"/></svg>');
            background-size: 150px 150px;
            opacity: 0.8;
            animation: snowfall 15s linear infinite;
            pointer-events: none;
        }
        @keyframes snowfall {
            from { background-position: 0 0; }
            to { background-position: 150px 150px; }
        }
        /* Tab Bar (Floating) */
        .side-tab-bar {
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 30;
            display: flex;
            gap: 10px;
        }
        
        .tab-button {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            background-color: rgba(255, 255, 255, 0.9);
            color: #90A4AE;
            box-shadow: 0 4px 10px rgba(0,0,0,0.15);
            transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid white;
        }
        
        .tab-button.active {
            background-color: #01579B;
            color: white;
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 6px 15px rgba(1, 87, 155, 0.3);
        }
        /* Main Content */
        .app-main {
            padding-top: 20px;
            position: relative;
            z-index: 5;
            min-height: calc(100vh - 250px);
        }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .card-shadow {
            box-shadow: 0 4px 20px rgba(179, 229, 252, 0.25);
            border: 1px solid rgba(179, 229, 252, 0.4);
        }
        
        /* --- Timeline Styles --- */
        /* 垂直連接線 */
        .timeline-line {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 28px;
            bottom: -20px;
            width: 2px;
            background-color: #E0F7FA;
            z-index: 0;
        }
        .last-item .timeline-line { display: none; }
        
        /* 必搭紅框動畫 */
        .urgent-border {
            border: 1px solid #FF8A80 !important;
            box-shadow: 0 0 0 1px #FF8A80, 0 4px 10px rgba(255, 138, 128, 0.2);
            animation: pulse-border 2s infinite;
        }
        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(255, 138, 128, 0.4); }
            70% { box-shadow: 0 0 0 4px rgba(255, 138, 128, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 138, 128, 0); }
        }
        .fade-enter-active, .fade-leave-active { transition: opacity 0.2s ease; }
        .fade-enter-from, .fade-leave-to { opacity: 0; }
        /* Sticky Date Selector */
        .date-selector-sticky {
            position: sticky;
            top: 0;
            background: linear-gradient(to bottom, #ffffff 80%, rgba(255,255,255,0));
            z-index: 20;
            padding-bottom: 10px;
            margin-bottom: 10px;
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.-right-8{right:-2rem}.-top-8{top:-2rem}.bottom-6{bottom:1.5rem}.bottom-\[70px\]{bottom:70px}.left-3{left:0.75rem}.right-0{right:0px}.right-4{right:1rem}.right-5{right:1.25rem}.right-6{right:1.5rem}.top-3{top:0.75rem}.top-4{top:1rem}.top-5{top:1.25rem}.z-10{z-index:10}.z-20{z-index:20}.z-40{z-index:40}.z-50{z-index:50}.-mx-5{margin-left:-1.25rem;margin-right:-1.25rem}.mb-0\.5{margin-bottom:0.125rem}.mb-1{margin-bottom:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-3{margin-bottom:0.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.ml-1{margin-left:0.25rem}.ml-1\.5{margin-left:0.375rem}.ml-2{margin-left:0.5rem}.ml-3{margin-left:0.75rem}.mr-1{margin-right:0.25rem}.mr-1\.5{margin-right:0.375rem}.mr-2{margin-right:0.5rem}.mr-3{margin-right:0.75rem}.mt-0\.5{margin-top:0.125rem}.mt-1{margin-top:0.25rem}.mt-1\.5{margin-top:0.375rem}.mt-2{margin-top:0.5rem}.mt-3{margin-top:0.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-12{height:3rem}.h-14{height:3.5rem}.h-3\.5{height:0.875rem}.h-4{height:1rem}.h-40{height:10rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-8{height:2rem}.h-\[64px\]{height:64px}.w-1\/3{width:33.333333%}.w-10{width:2.5rem}.w-12{width:3rem}.w-14{width:3.5rem}.w-24{width:6rem}.w-3\.5{width:0.875rem}.w-4{width:1rem}.w-40{width:10rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-8{width:2rem}.w-full{width:100%}.w-\[52px\]{width:52px}.min-w-0{min-width:0px}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-\[2\]{flex:2}.flex-shrink-0{flex-shrink:0}.rotate-45{--tw-rotate:45deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-105{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes fadeIn{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}.animate-fade-in{animation:fadeIn 0.3s ease-out forwards}.cursor-pointer{cursor:pointer}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-1\.5{gap:0.375rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.space-x-2 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.5rem * var(--tw-space-x-reverse));margin-left:calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.75rem * var(--tw-space-x-reverse));margin-left:calc(0.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-5 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.25rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-3xl{border-radius:1.5rem}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-blue-100{--tw-border-opacity:1;border-color:rgb(219 234 254 / var(--tw-border-opacity, 1))}.border-blue-50{--tw-border-opacity:1;border-color:rgb(239 246 255 / var(--tw-border-opacity, 1))}.border-ice-blue{--tw-border-opacity:1;border-color:rgb(179 229 252 / var(--tw-border-opacity, 1))}.border-ice-blue\/30{border-color:rgb(179 229 252 / 0.3)}.border-note-border{--tw-border-opacity:1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-red-100{--tw-border-opacity:1;border-color:rgb(254 226 226 / var(--tw-border-opacity, 1))}.border-slate-100{--tw-border-opacity:1;border-color:rgb(241 245 249 / var(--tw-border-opacity, 1))}.border-slate-300{--tw-border-opacity:1;border-color:rgb(203 213 225 / var(--tw-border-opacity, 1))}.border-slate-50{--tw-border-opacity:1;border-color:rgb(248 250 252 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-white\/20{border-color:rgb(255 255 255 / 0.2)}.border-white\/5{border-color:rgb(255 255 255 / 0.05)}.border-deep-sea-blue{--tw-border-opacity:1;border-color:rgb(1 87 155 / var(--tw-border-opacity, 1))}.border-white{--tw-border-opacity:1;border-color:rgb(255 255 255 / var(--tw-border-opacity, 1))}.bg-accent-yellow{--tw-bg-opacity:1;background-color:rgb(255 213 79 / var(--tw-bg-opacity, 1))}.bg-black\/20{background-color:rgb(0 0 0 / 0.2)}.bg-blue-50{--tw-bg-opacity:1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-50\/50{background-color:rgb(239 246 255 / 0.5)}.bg-deep-sea-blue{--tw-bg-opacity:1;background-color:rgb(1 87 155 / var(--tw-bg-opacity, 1))}.bg-deep-sea-blue\/40{background-color:rgb(1 87 155 / 0.4)}.bg-emerald-400{--tw-bg-opacity:1;background-color:rgb(52 211 153 / var(--tw-bg-opacity, 1))}.bg-indigo-50{--tw-bg-opacity:1;background-color:rgb(238 242 255 / var(--tw-bg-opacity, 1))}.bg-nav-base{--tw-bg-opacity:1;background-color:rgb(207 216 220 / var(--tw-bg-opacity, 1))}.bg-note-yellow{--tw-bg-opacity:1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/10{background-color:rgb(255 255 255 / 0.1)}.bg-white\/20{background-color:rgb(255 255 255 / 0.2)}.bg-white\/50{background-color:rgb(255 255 255 / 0.5)}.bg-indigo-100{--tw-bg-opacity:1;background-color:rgb(224 231 255 / var(--tw-bg-opacity, 1))}.bg-orange-100{--tw-bg-opacity:1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-sky-100{--tw-bg-opacity:1;background-color:rgb(224 242 254 / var(--tw-bg-opacity, 1))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-blue-600{--tw-gradient-from:#2563eb var(--tw-gradient-from-position);--tw-gradient-to:rgb(37 99 235 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-deep-sea-blue{--tw-gradient-from:#01579B var(--tw-gradient-from-position);--tw-gradient-to:rgb(1 87 155 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-emerald-500{--tw-gradient-from:#10b981 var(--tw-gradient-from-position);--tw-gradient-to:rgb(16 185 129 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-sky-50{--tw-gradient-from:#f0f9ff var(--tw-gradient-from-position);--tw-gradient-to:rgb(240 249 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.to-blue-500{--tw-gradient-to:#3b82f6 var(--tw-gradient-to-position)}.to-cyan-800{--tw-gradient-to:#155e75 var(--tw-gradient-to-position)}.to-emerald-400{--tw-gradient-to:#34d399 var(--tw-gradient-to-position)}.to-white{--tw-gradient-to:#fff var(--tw-gradient-to-position)}.p-0\.5{padding:0.125rem}.p-1{padding:0.25rem}.p-1\.5{padding:0.375rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.px-1{padding-left:0.25rem;padding-right:0.25rem}.px-1\.5{padding-left:0.375rem;padding-right:0.375rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-0\.5{padding-top:0.125rem;padding-bottom:0.125rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pb-2{padding-bottom:0.5rem}.pb-20{padding-bottom:5rem}.pb-24{padding-bottom:6rem}.pb-4{padding-bottom:1rem}.pb-5{padding-bottom:1.25rem}.pl-12{padding-left:3rem}.pl-3{padding-left:0.75rem}.pr-2{padding-right:0.5rem}.pr-3{padding-right:0.75rem}.pt-1{padding-top:0.25rem}.pt-2{padding-top:0.5rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.text-right{text-align:right}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-\[10px\]{font-size:10px}.text-\[8px\]{font-size:8px}.text-\[9px\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-black{font-weight:900}.font-bold{font-weight:700}.font-medium{font-weight:500}.uppercase{text-transform:uppercase}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-snug{line-height:1.375}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-0.025em}.tracking-wide{letter-spacing:0.025em}.tracking-wider{letter-spacing:0.05em}.tracking-widest{letter-spacing:0.1em}.text-accent-yellow{--tw-text-opacity:1;color:rgb(255 213 79 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity:1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-cyan-100{--tw-text-opacity:1;color:rgb(207 250 254 / var(--tw-text-opacity, 1))}.text-cyan-200{--tw-text-opacity:1;color:rgb(165 243 252 / var(--tw-text-opacity, 1))}.text-deep-sea-blue{--tw-text-opacity:1;color:rgb(1 87 155 / var(--tw-text-opacity, 1))}.text-ice-blue{--tw-text-opacity:1;color:rgb(179 229 252 / var(--tw-text-opacity, 1))}.text-indigo-500{--tw-text-opacity:1;color:rgb(99 102 241 / var(--tw-text-opacity, 1))}.text-nav-arrow{--tw-text-opacity:1;color:rgb(1 87 155 / var(--tw-text-opacity, 1))}.text-pink-500{--tw-text-opacity:1;color:rgb(236 72 153 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-slate-200{--tw-text-opacity:1;color:rgb(226 232 240 / var(--tw-text-opacity, 1))}.text-slate-300{--tw-text-opacity:1;color:rgb(203 213 225 / var(--tw-text-opacity, 1))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184 / var(--tw-text-opacity, 1))}.text-slate-500{--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity, 1))}.text-slate-600{--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity, 1))}.text-slate-700{--tw-text-opacity:1;color:rgb(51 65 85 / var(--tw-text-opacity, 1))}.text-slate-800{--tw-text-opacity:1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity:1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity:1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity:1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-sky-500{--tw-text-opacity:1;color:rgb(14 165 233 / var(--tw-text-opacity, 1))}.opacity-0{opacity:0}.opacity-50{opacity:0.5}.opacity-80{opacity:0.8}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_4px_15px_rgba\(255\2c 213\2c 79\2c 0\.5\)\]{--tw-shadow:0 4px 15px rgba(255,213,79,0.5);--tw-shadow-colored:0 4px 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-\[0_4px_15px_rgba\(52\2c 211\2c 153\2c 0\.4\)\]{--tw-shadow:0 4px 15px rgba(52,211,153,0.4);--tw-shadow-colored:0 4px 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-blue-900\/20{--tw-shadow-color:rgb(30 58 138 / 0.2);--tw-shadow:var(--tw-shadow-colored)}.outline-none{outline:2px solid transparent;outline-offset:2px}.blur-3xl{--tw-blur:blur(64px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-sm{--tw-drop-shadow:drop-shadow(0 1px 1px rgb(0 0 0 / 0.05));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.last\:border-0:last-child{border-width:0px}.hover\:scale-110:hover{--tw-scale-x:1.1;--tw-scale-y:1.1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-ice-blue:hover{--tw-border-opacity:1;border-color:rgb(179 229 252 / var(--tw-border-opacity, 1))}.hover\:bg-black\/40:hover{background-color:rgb(0 0 0 / 0.4)}.hover\:bg-deep-sea-blue:hover{--tw-bg-opacity:1;background-color:rgb(1 87 155 / var(--tw-bg-opacity, 1))}.hover\:bg-red-50:hover{--tw-bg-opacity:1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-slate-50:hover{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.hover\:bg-white\/40:hover{background-color:rgb(255 255 255 / 0.4)}.hover\:text-red-400:hover{--tw-text-opacity:1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.focus\:border-ice-blue:focus{--tw-border-opacity:1;border-color:rgb(179 229 252 / var(--tw-border-opacity, 1))}.focus\:ring-0:focus{--tw-ring-offset-shadow:var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow:var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)}.active\:scale-95:active{--tw-scale-x:.95;--tw-scale-y:.95;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.active\:scale-\[0\.98\]:active{--tw-scale-x:0.98;--tw-scale-y:0.98;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group:hover .group-hover\:opacity-100{opacity:1}@media (min-width: 640px){.sm\:items-center{align-items:center}}</style></head>
<body>
<div id="app" class="app-container" data-v-app=""><!-- 1. HEADER --><div class="header-bg"><div class="header-image-container group"><img src="./index_files/lia.jpg" alt="Header"><div class="header-overlay"></div><div class="snow-layer"></div><!-- 右上角按鈕群組 --><div class="absolute top-5 right-5 z-20 flex gap-2"><!-- 重置按鈕 --><button class="w-8 h-8 bg-white/20 hover:bg-white/40 backdrop-blur-md rounded-full flex items-center justify-center text-white transition border border-white/20" title="強制讀取 lia.jpg"><i class="fa-solid fa-rotate-right text-xs"></i></button><!-- 上傳按鈕 --><button class="w-8 h-8 bg-black/20 hover:bg-black/40 backdrop-blur-md rounded-full flex items-center justify-center text-white transition border border-white/20"><i class="fa-solid fa-camera text-xs"></i></button></div><input type="file" accept="image/*" class="hidden"><!-- 日期 --><div class="absolute bottom-[70px] right-5 z-20"><span class="text-xs font-bold text-white tracking-widest font-mono bg-deep-sea-blue/40 px-3 py-1 rounded-full backdrop-blur-md border border-white/20 shadow-sm"> 2026.01.14 - 01.19 </span></div></div><!-- Tab Bar --><div class="side-tab-bar"><button class="tab-button active"><i class="fa-solid fa-calendar-day"></i></button><button class="tab-button"><i class="fa-solid fa-circle-info"></i></button><button class="tab-button"><i class="fa-solid fa-basket-shopping"></i></button><button class="tab-button"><i class="fa-solid fa-yen-sign"></i></button></div></div><!-- 2. MAIN CONTENT --><main class="app-main px-5 pb-24"><div><!-- 天氣卡片 --><div class="mb-4 bg-gradient-to-r from-sky-50 to-white border border-ice-blue rounded-2xl p-4 flex justify-between items-center shadow-sm"><div class="flex items-center space-x-3"><div class="w-10 h-10 bg-white rounded-full flex items-center justify-center text-deep-sea-blue shadow-sm"><i class="fa-solid fa-snowflake text-ice-blue text-xl"></i></div><div><div class="text-xl font-bold text-deep-sea-blue leading-none">-1°</div><div class="text-xs text-slate-400 mt-0.5">小雪 · 池袋</div></div></div><div class="text-right"><div class="text-xs font-bold text-slate-500 bg-slate-100 px-2 py-1 rounded-lg">體感 -5°</div></div></div><!-- 日期選單 (Sticky) --><div class="date-selector-sticky -mx-5 px-5 pt-1"><div class="flex overflow-x-auto hide-scrollbar space-x-3 pb-2"><div class="flex-shrink-0 w-[52px] h-[64px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all border-2 bg-deep-sea-blue text-white border-deep-sea-blue shadow-lg scale-105"><span class="text-[10px] font-bold uppercase tracking-wider">WED</span><span class="text-lg font-bold font-mono leading-tight">14</span></div><div class="flex-shrink-0 w-[52px] h-[64px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all border-2 bg-white text-slate-400 border-white shadow-sm hover:bg-slate-50"><span class="text-[10px] font-bold uppercase tracking-wider">THU</span><span class="text-lg font-bold font-mono leading-tight">15</span></div><div class="flex-shrink-0 w-[52px] h-[64px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all border-2 bg-white text-slate-400 border-white shadow-sm hover:bg-slate-50"><span class="text-[10px] font-bold uppercase tracking-wider">FRI</span><span class="text-lg font-bold font-mono leading-tight">16</span></div><div class="flex-shrink-0 w-[52px] h-[64px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all border-2 bg-white text-slate-400 border-white shadow-sm hover:bg-slate-50"><span class="text-[10px] font-bold uppercase tracking-wider">SAT</span><span class="text-lg font-bold font-mono leading-tight">17</span></div><div class="flex-shrink-0 w-[52px] h-[64px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all border-2 bg-white text-slate-400 border-white shadow-sm hover:bg-slate-50"><span class="text-[10px] font-bold uppercase tracking-wider">SUN</span><span class="text-lg font-bold font-mono leading-tight">18</span></div><div class="flex-shrink-0 w-[52px] h-[64px] rounded-xl flex flex-col items-center justify-center cursor-pointer transition-all border-2 bg-white text-slate-400 border-white shadow-sm hover:bg-slate-50"><span class="text-[10px] font-bold uppercase tracking-wider">MON</span><span class="text-lg font-bold font-mono leading-tight">19</span></div></div></div><!-- 行程列表 (Timeline Layout) --><div class="space-y-0 relative pb-4"><!--v-if--><div class="group flex items-stretch mb-2"><!-- 1. 左側時間 --><div class="w-14 flex-shrink-0 flex flex-col items-end pt-1 pr-3"><span class="text-sm font-black text-slate-700 font-mono leading-none">15:00</span><span class="text-[10px] text-slate-400 font-mono mt-1">19:00</span></div><!-- 2. 中間軸線與地標ICON --><div class="relative w-4 flex flex-col items-center flex-shrink-0"><!-- 連接線 --><div class="timeline-line"></div><!-- 地標 ICON (取代圓點) --><div class="z-10 bg-white p-0.5 rounded-full mt-0.5"><i class="fa-solid fa-location-dot text-lg drop-shadow-sm text-blue-500"></i></div></div><!-- 3. 右側卡片 --><div class="flex-1 pl-3 pb-5 min-w-0"><div class="bg-white rounded-2xl p-3 card-shadow relative overflow-hidden active:scale-[0.98] transition-all"><!-- 航班特殊樣式 --><div><div class="flex justify-between items-center mb-2"><span class="text-[10px] bg-blue-50 text-blue-600 px-2 py-0.5 rounded font-bold uppercase tracking-wide">FLIGHT</span><div class="text-xs text-slate-400 font-mono flex items-center"><i class="fa-regular fa-clock mr-1"></i>19:00 抵達</div></div><div class="flex justify-between items-center px-1 py-1"><div class="text-lg font-black text-deep-sea-blue">TPE</div><div class="flex flex-col items-center px-2"><i class="fa-solid fa-plane text-ice-blue transform rotate-45 text-xl"></i><span class="text-[9px] text-slate-400 mt-1">JX804</span></div><div class="text-lg font-black text-deep-sea-blue">NRT</div></div></div></div><!-- 交通方式 --><div class="mt-2 ml-1"><div class="inline-flex items-center gap-1.5 text-[9px] text-slate-400 bg-white/50 px-2 py-0.5 rounded-full border border-slate-100"><i class="fa-solid fa-train-subway text-slate-300"></i><i class="fa-solid fa-arrow-down text-[8px] opacity-50"></i><span class="font-mono">120m</span></div></div></div></div><div class="group flex items-stretch mb-2"><!-- 1. 左側時間 --><div class="w-14 flex-shrink-0 flex flex-col items-end pt-1 pr-3"><span class="text-sm font-black text-slate-700 font-mono leading-none">20:00</span><span class="text-[10px] text-slate-400 font-mono mt-1">21:35</span></div><!-- 2. 中間軸線與地標ICON --><div class="relative w-4 flex flex-col items-center flex-shrink-0"><!-- 連接線 --><div class="timeline-line"></div><!-- 地標 ICON (取代圓點) --><div class="z-10 bg-white p-0.5 rounded-full mt-0.5"><i class="fa-solid fa-location-dot text-lg drop-shadow-sm text-sky-500"></i></div></div><!-- 3. 右側卡片 --><div class="flex-1 pl-3 pb-5 min-w-0"><div class="bg-white rounded-2xl p-3 card-shadow relative overflow-hidden active:scale-[0.98] transition-all"><!-- 航班特殊樣式 --><!-- 一般樣式 --><div><div class="flex justify-between items-start mb-1"><div class="flex-1 pr-2 min-w-0"><!-- 標題 + 有顏色的 ICON --><h3 class="text-sm font-bold text-deep-sea-blue leading-snug flex items-center"><div class="w-6 h-6 rounded-full flex items-center justify-center mr-1.5 flex-shrink-0 bg-sky-100"><i class="fa-solid fa-train-subway text-sky-500 text-xs"></i></div> 成田機場第二航廈</h3><!-- 分類與交通標籤 --><div class="flex flex-wrap items-center gap-1.5 mt-1.5"><span class="text-[9px] px-1.5 py-0.5 rounded bg-slate-50 text-slate-500 border border-slate-100 whitespace-nowrap">交通</span><!-- 必搭 --><!--v-if--></div></div><!-- 導航按鈕 --><button class="w-8 h-8 rounded-full bg-nav-base text-nav-arrow flex items-center justify-center hover:bg-deep-sea-blue hover:text-white transition-colors flex-shrink-0 shadow-sm ml-1"><i class="fa-solid fa-location-arrow text-xs"></i></button></div><!-- 資訊欄位區 --><div class="mt-2 pt-2 border-t border-slate-50 grid grid-cols-2 gap-2"><div class="flex items-center text-[10px] text-slate-500"><i class="fa-regular fa-clock text-slate-400 w-4"></i><span>07:00-23:00</span></div><!--v-if--></div><!-- 優化後的備註區塊 (黃色鉛筆風格) --><div class="mt-2 text-xs bg-note-yellow p-2 rounded-lg text-slate-700 leading-relaxed border border-note-border shadow-sm"><div><!-- 黃色鉛筆 ICON + 備註 --><div class="flex items-center mb-0.5"><i class="fa-solid fa-pencil text-yellow-500 mr-1.5 text-[10px]"></i><span class="font-bold text-slate-600 text-[10px]">備註</span></div><!-- 內容直接顯示，不需折疊 --><div class="whitespace-pre-wrap">A : 利木津巴士 → 池袋飯店
B : SKYLINER → 日暮里 → 池袋
購票處：成田二航 1F 入境大廳。
約 21:35 抵達飯店</div></div></div></div></div><!-- 交通方式 --><div class="mt-2 ml-1"><div class="inline-flex items-center gap-1.5 text-[9px] text-slate-400 bg-white/50 px-2 py-0.5 rounded-full border border-slate-100"><i class="fa-solid fa-person-walking text-slate-300"></i><i class="fa-solid fa-arrow-down text-[8px] opacity-50"></i><span class="font-mono">5m</span></div></div></div></div><div class="group flex items-stretch mb-2"><!-- 1. 左側時間 --><div class="w-14 flex-shrink-0 flex flex-col items-end pt-1 pr-3"><span class="text-sm font-black text-slate-700 font-mono leading-none">21:35</span><span class="text-[10px] text-slate-400 font-mono mt-1">22:00</span></div><!-- 2. 中間軸線與地標ICON --><div class="relative w-4 flex flex-col items-center flex-shrink-0"><!-- 連接線 --><div class="timeline-line"></div><!-- 地標 ICON (取代圓點) --><div class="z-10 bg-white p-0.5 rounded-full mt-0.5"><i class="fa-solid fa-location-dot text-lg drop-shadow-sm text-indigo-500"></i></div></div><!-- 3. 右側卡片 --><div class="flex-1 pl-3 pb-5 min-w-0"><div class="bg-white rounded-2xl p-3 card-shadow relative overflow-hidden active:scale-[0.98] transition-all"><!-- 航班特殊樣式 --><!-- 一般樣式 --><div><div class="flex justify-between items-start mb-1"><div class="flex-1 pr-2 min-w-0"><!-- 標題 + 有顏色的 ICON --><h3 class="text-sm font-bold text-deep-sea-blue leading-snug flex items-center"><div class="w-6 h-6 rounded-full flex items-center justify-center mr-1.5 flex-shrink-0 bg-indigo-100"><i class="fa-solid fa-bed text-indigo-500 text-xs"></i></div> 太陽城王子大飯店 Check-in</h3><!-- 分類與交通標籤 --><div class="flex flex-wrap items-center gap-1.5 mt-1.5"><span class="text-[9px] px-1.5 py-0.5 rounded bg-slate-50 text-slate-500 border border-slate-100 whitespace-nowrap">住宿</span><!-- 必搭 --><!--v-if--></div></div><!-- 導航按鈕 --><button class="w-8 h-8 rounded-full bg-nav-base text-nav-arrow flex items-center justify-center hover:bg-deep-sea-blue hover:text-white transition-colors flex-shrink-0 shadow-sm ml-1"><i class="fa-solid fa-location-arrow text-xs"></i></button></div><!-- 資訊欄位區 --><div class="mt-2 pt-2 border-t border-slate-50 grid grid-cols-2 gap-2"><div class="flex items-center text-[10px] text-slate-500"><i class="fa-regular fa-clock text-slate-400 w-4"></i><span>24H</span></div><!--v-if--></div><!-- 優化後的備註區塊 (黃色鉛筆風格) --><div class="mt-2 text-xs bg-note-yellow p-2 rounded-lg text-slate-700 leading-relaxed border border-note-border shadow-sm"><div><!-- 黃色鉛筆 ICON + 備註 --><div class="flex items-center mb-0.5"><i class="fa-solid fa-pencil text-yellow-500 mr-1.5 text-[10px]"></i><span class="font-bold text-slate-600 text-[10px]">備註</span></div><!-- 內容直接顯示，不需折疊 --><div class="whitespace-pre-wrap">池袋</div></div></div></div></div><!-- 交通方式 --><div class="mt-2 ml-1"><div class="inline-flex items-center gap-1.5 text-[9px] text-slate-400 bg-white/50 px-2 py-0.5 rounded-full border border-slate-100"><i class="fa-solid fa-person-walking text-slate-300"></i><i class="fa-solid fa-arrow-down text-[8px] opacity-50"></i><span class="font-mono">10m</span></div></div></div></div><div class="group flex items-stretch mb-2 last-item"><!-- 1. 左側時間 --><div class="w-14 flex-shrink-0 flex flex-col items-end pt-1 pr-3"><span class="text-sm font-black text-slate-700 font-mono leading-none">22:00</span><span class="text-[10px] text-slate-400 font-mono mt-1">23:00</span></div><!-- 2. 中間軸線與地標ICON --><div class="relative w-4 flex flex-col items-center flex-shrink-0"><!-- 連接線 --><div class="timeline-line"></div><!-- 地標 ICON (取代圓點) --><div class="z-10 bg-white p-0.5 rounded-full mt-0.5"><i class="fa-solid fa-location-dot text-lg drop-shadow-sm text-orange-500"></i></div></div><!-- 3. 右側卡片 --><div class="flex-1 pl-3 pb-5 min-w-0"><div class="bg-white rounded-2xl p-3 card-shadow relative overflow-hidden active:scale-[0.98] transition-all"><!-- 航班特殊樣式 --><!-- 一般樣式 --><div><div class="flex justify-between items-start mb-1"><div class="flex-1 pr-2 min-w-0"><!-- 標題 + 有顏色的 ICON --><h3 class="text-sm font-bold text-deep-sea-blue leading-snug flex items-center"><div class="w-6 h-6 rounded-full flex items-center justify-center mr-1.5 flex-shrink-0 bg-orange-100"><i class="fa-solid fa-utensils text-orange-500 text-xs"></i></div> 一蘭 池袋駅前店</h3><!-- 分類與交通標籤 --><div class="flex flex-wrap items-center gap-1.5 mt-1.5"><span class="text-[9px] px-1.5 py-0.5 rounded bg-slate-50 text-slate-500 border border-slate-100 whitespace-nowrap">美食</span><!-- 必搭 --><!--v-if--></div></div><!-- 導航按鈕 --><button class="w-8 h-8 rounded-full bg-nav-base text-nav-arrow flex items-center justify-center hover:bg-deep-sea-blue hover:text-white transition-colors flex-shrink-0 shadow-sm ml-1"><i class="fa-solid fa-location-arrow text-xs"></i></button></div><!-- 資訊欄位區 --><div class="mt-2 pt-2 border-t border-slate-50 grid grid-cols-2 gap-2"><div class="flex items-center text-[10px] text-slate-500"><i class="fa-regular fa-clock text-slate-400 w-4"></i><span>24H</span></div><!--v-if--></div><!-- 優化後的備註區塊 (黃色鉛筆風格) --><div class="mt-2 text-xs bg-note-yellow p-2 rounded-lg text-slate-700 leading-relaxed border border-note-border shadow-sm"><div><!-- 黃色鉛筆 ICON + 備註 --><div class="flex items-center mb-0.5"><i class="fa-solid fa-pencil text-yellow-500 mr-1.5 text-[10px]"></i><span class="font-bold text-slate-600 text-[10px]">備註</span></div><!-- 內容直接顯示，不需折疊 --><div class="whitespace-pre-wrap">西友超市 24H
★ 記得去超市/超商買明天的早餐！</div></div></div></div></div><!-- 交通方式 --><!--v-if--></div></div></div><!-- FAB Button --><button class="fixed bottom-6 right-6 w-14 h-14 bg-accent-yellow text-deep-sea-blue rounded-full shadow-[0_4px_15px_rgba(255,213,79,0.5)] flex items-center justify-center text-xl hover:scale-110 transition-transform z-40"><i class="fa-solid fa-plus"></i></button></div></main><!-- MODALS --><!-- 1. Itinerary Modal (新增/編輯行程) --><!--v-if--><!-- 2. List Modal (購物/待辦) --><!--v-if--><!-- 3. Expense Modal --><!--v-if--></div>
<script>
    const { createApp, ref, computed, onMounted, watch } = Vue;
    createApp({
        setup() {
            // --- Init ---
            const currentTab = ref('itinerary');
            const tabs = [
                { id: 'itinerary', icon: 'fa-solid fa-calendar-day' },
                { id: 'info', icon: 'fa-solid fa-circle-info' },
                { id: 'lists', icon: 'fa-solid fa-basket-shopping' },
                { id: 'expenses', icon: 'fa-solid fa-yen-sign' },
            ];
            
            // --- 圖片處理邏輯 ---
            const localFile = 'lia.jpg';
            const onlineFallback = 'https://images.unsplash.com/photo-1548265005-728b704c3298?q=80&w=2070&auto=format&fit=crop';
            
            const STORAGE_KEY = 'zao_cover_2026_fixed_v3';
            const storedCover = localStorage.getItem(STORAGE_KEY);
            
            const isUserUploaded = storedCover && storedCover.startsWith('data:image');
            const coverImage = ref(isUserUploaded ? storedCover : localFile);
            
            const handleImageError = (e) => {
                if (e.target.src === onlineFallback) return;
                console.warn('Local image not found, using fallback.');
                e.target.src = onlineFallback;
            };
            
            const resetCover = () => {
                localStorage.removeItem(STORAGE_KEY);
                coverImage.value = localFile; 
                setTimeout(() => {
                    const img = document.querySelector('.header-image-container img');
                    if(img) img.src = localFile;
                }, 50);
                alert('已重置為預設圖片 (lia.jpg)。');
            };
            const fileInput = ref(null);
            const triggerFileInput = () => fileInput.value.click();
            const handleImageUpload = (e) => { 
                const f = e.target.files[0]; 
                if (f) { 
                    const r = new FileReader(); 
                    r.onload = (ev) => { 
                        coverImage.value = ev.target.result; 
                        localStorage.setItem(STORAGE_KEY, ev.target.result); 
                    }; 
                    r.readAsDataURL(f); 
                }
            };
            
            // --- Data ---
            const tripDays = [
                { dayNum: '14', week: 'WED', fullDate: '2026-01-14' }, { dayNum: '15', week: 'THU', fullDate: '2026-01-15' }, { dayNum: '16', week: 'FRI', fullDate: '2026-01-16' },
                { dayNum: '17', week: 'SAT', fullDate: '2026-01-17' }, { dayNum: '18', week: 'SUN', fullDate: '2026-01-18' }, { dayNum: '19', week: 'MON', fullDate: '2026-01-19' },
            ];
            const selectedDayIndex = ref(0);
            
            const weatherInfo = computed(() => {
                const map = [
                    { temp: '-1°', feel: '-5°', icon: 'fa-solid fa-snowflake text-ice-blue', desc: '小雪 · 池袋' },
                    { temp: '-3°', feel: '-8°', icon: 'fa-solid fa-snowflake text-ice-blue', desc: '大雪 · 山形' },
                    { temp: '-8°', feel: '-15°', icon: 'fa-solid fa-icicles text-blue-300', desc: '暴風雪 · 藏王' },
                    { temp: '2°', feel: '-1°', icon: 'fa-solid fa-cloud text-slate-300', desc: '多雲 · 那須' },
                    { temp: '8°', feel: '5°', icon: 'fa-solid fa-sun text-accent-yellow', desc: '晴天 · 淺草' },
                    { temp: '9°', feel: '7°', icon: 'fa-solid fa-cloud-sun text-accent-yellow', desc: '多雲 · 上野' }
                ];
                return map[selectedDayIndex.value] || map[0];
            });
            // 行程資料
            const defaultItinerary = {
                0: [ 
                    { id: 101, category: 'flight', name: 'JX804 TPE->NRT', startTime: '15:00', endTime: '19:00', note: '第一航廈出發。抵達後記得：\n1. 領取 SIM 卡/WiFi\n2. 購買/儲值 Suica', transportType: 'public', transportTime: 120, openTime: '' },
                    { id: 102, category: 'transport', name: '利木津巴士 -> 池袋', startTime: '20:00', endTime: '21:35', note: '購票處：成田二航 1F 入境大廳。約 21:35 抵達飯店', transportType: 'walk', transportTime: 5, openTime: '07:00-23:00' },
                    { id: 103, category: 'hotel', name: '太陽城王子大飯店 Check-in', startTime: '21:35', endTime: '22:00', note: '池袋', transportType: 'walk', transportTime: 10, openTime: '24H' },
                    { id: 104, category: 'food', name: '晚餐：一蘭 或 西友超市', startTime: '22:00', endTime: '23:00', note: '一蘭池袋店 (24h)。\n★記得去超市/超商買明天的早餐！', transportType: 'walk', transportTime: 0, openTime: '24H' }
                ],
                1: [ 
                    { id: 200, category: 'walk', name: '飯店 -> 池袋車站', startTime: '06:00', endTime: '06:15', note: '步行前往車站', transportType: 'public', transportTime: 7 },
                    { id: 201, category: 'transport', name: 'JR 山手線 (往東京)', startTime: '06:15', endTime: '06:46', note: '06:22 發車 (使用 JR PASS)\n確保 06:46 前抵達東京站轉乘', transportType: 'public', transportTime: 26 },
                    { id: 202, category: 'transport', name: '新幹線 Tsubasa 123號', startTime: '07:00', endTime: '09:53', note: '07:12 東京發車 -> 09:53 山形著\n(使用 JR PASS / 指定席)\n可買車站便當', transportType: 'walk', transportTime: 30 },
                    { id: 203, category: 'hotel', name: 'Super Hotel 放行李', startTime: '10:30', endTime: '11:00', note: '山形站西口天然溫泉', transportType: 'walk', transportTime: 10, openTime: '15:00 CI' },
                    { id: 204, category: 'food', name: '午餐：庄司屋 蕎麥麵', startTime: '11:30', endTime: '12:30', note: '山形名物', transportType: 'walk', transportTime: 30, openTime: '11:00-15:00' },
                    { id: 205, category: 'transport', name: 'JR 山形 -> 大石田', startTime: '13:20', endTime: '14:21', note: '13:32 發車\n必須搭到!!', transportType: 'public', transportTime: 40 },
                    { id: 206, category: 'sightseeing', name: '巴士 -> 銀山溫泉', startTime: '15:30', endTime: '16:10', note: '接駁巴士', transportType: 'walk', transportTime: 0 },
                    { id: 207, category: 'food', name: '銀山溫泉散策', startTime: '16:10', endTime: '17:40', note: '必吃：野川豆腐屋 (豆腐/炸豆腐)、Haikara-san 通瑞 (咖哩麵包)。\n拍照點：紅橋、能登屋旅館', transportType: 'public', transportTime: 40, openTime: '店家約17:00關' },
                    { id: 208, category: 'transport', name: '巴士 回程 -> 大石田', startTime: '17:20', endTime: '18:30', note: '末班車人多，請務必 17:20 (30分鐘前) 開始排隊！\n17:50 發車', transportType: 'public', transportTime: 50 },
                    { id: 209, category: 'food', name: '晚餐：米澤牛 登起波', startTime: '20:00', endTime: '21:30', note: '已訂位 (山形店)', transportType: 'walk', transportTime: 15, openTime: '17:00-22:00' },
                    { id: 210, category: 'hotel', name: '回 Super Hotel', startTime: '22:00', endTime: '22:00', note: '休息', transportType: 'walk', transportTime: 0 }
                ],
                2: [ 
                    { id: 301, category: 'hotel', name: '飯店出發 -> 山形站', startTime: '06:00', endTime: '06:15', note: '早起出門。注意保暖：暖暖包/發熱衣/冰爪', transportType: 'public', transportTime: 18 },
                    { id: 302, category: 'transport', name: 'JR 山形 -> 仙台', startTime: '06:33', endTime: '08:00', note: '必須搭到!!', transportType: 'walk', transportTime: 30 },
                    { id: 303, category: 'sightseeing', name: '仙台東口 集合 (KKDay)', startTime: '08:30', endTime: '08:45', note: 'KKDay 觀光巴士集合點', transportType: 'public', transportTime: 0 },
                    { id: 304, category: 'sightseeing', name: '藏王狐狸村', startTime: '09:00', endTime: '11:30', note: '跟團行程', transportType: 'public', transportTime: 60, ticketCost:'1000', openTime: '09:00-16:00' },
                    { id: 305, category: 'sightseeing', name: '藏王樹冰', startTime: '13:00', endTime: '16:30', note: '跟團行程 (纜車+樹冰)\n山頂極冷，注意相機電池耗電', transportType: 'public', transportTime: 120, ticketCost:'3500', openTime: '08:30-17:00' },
                    { id: 306, category: 'transport', name: '巴士返回仙台', startTime: '16:30', endTime: '18:30', note: '行程結束', transportType: 'walk', transportTime: 30 },
                    { id: 307, category: 'food', name: '晚餐：善治郎 牛舌', startTime: '19:00', endTime: '20:30', note: '仙台站前本店 (未訂位)', transportType: 'walk', transportTime: 40, openTime: '11:00-22:30' },
                    { id: 308, category: 'transport', name: 'JR 仙台 -> 山形', startTime: '21:18', endTime: '22:43', note: '必須搭到!! (備案 22:15)', transportType: 'walk', transportTime: 0 }
                ],
                3: [ 
                    { id: 400, category: 'walk', name: '飯店 -> 山形車站', startTime: '05:30', endTime: '05:45', note: '辦理退房，前往車站', transportType: 'public', transportTime: 14 },
                    { id: 401, category: 'transport', name: '新幹線 山形->郡山', startTime: '05:59', endTime: '07:23', note: 'TSUBASA 172 必須搭到!!', transportType: 'public', transportTime: 9 },
                    { id: 402, category: 'transport', name: '新幹線 郡山->那須鹽原', startTime: '07:32', endTime: '07:54', note: 'YAMABIKO 206 必須搭到!!', transportType: 'walk', transportTime: 30 },
                    { id: 403, category: 'transport', name: '巴士 -> 那須動物王國', startTime: '09:15', endTime: '10:25', note: '僅此一班 必須搭到!! (8:30先排隊)', transportType: 'walk', transportTime: 0 },
                    { id: 404, category: 'sightseeing', name: '那須動物王國', startTime: '10:25', endTime: '15:15', note: '午餐：山貓餐廳', transportType: 'public', transportTime: 45, ticketCost:'2400', openTime: '10:00-16:00' },
                    { id: 405, category: 'transport', name: '巴士 回程 -> 車站', startTime: '16:00', endTime: '17:00', note: '僅此一班 必須搭到!! (15:15先排隊)', transportType: 'walk', transportTime: 0 },
                    { id: 406, category: 'food', name: '空檔休息', startTime: '17:00', endTime: '18:00', note: '車站候車室 或 BECK\'S COFFEE', transportType: 'public', transportTime: 3 },
                    { id: 407, category: 'transport', name: 'JR 那須鹽原 -> 上野', startTime: '18:03', endTime: '19:10', note: '必須搭到!!', transportType: 'walk', transportTime: 15 },
                    { id: 408, category: 'hotel', name: 'LANDABOUT Check-in', startTime: '19:25', endTime: '20:00', note: '鶯谷站', transportType: 'walk', transportTime: 15, openTime: '24H' },
                    { id: 409, category: 'food', name: '晚餐：Depot 或 AFURI', startTime: '20:15', endTime: '21:30', note: '有樂町附近', transportType: 'walk', transportTime: 30, openTime: '11:00-22:00' }
                ],
                4: [ 
                    { id: 500, category: 'walk', name: '飯店出發', startTime: '09:15', endTime: '09:30', note: '前往早餐店', transportType: 'walk', transportTime: 15 },
                    { id: 501, category: 'food', name: '早餐：EGG BABY CAFE', startTime: '09:30', endTime: '10:30', note: '排隊名店', transportType: 'walk', transportTime: 20, openTime: '10:00-22:00' },
                    { id: 502, category: 'sightseeing', name: '淺草散策', startTime: '11:00', endTime: '13:00', note: '雷門、仲見世通、西參道', transportType: 'walk', transportTime: 10, openTime: '24H' },
                    { id: 503, category: 'food', name: '午餐：淺草今半', startTime: '13:00', endTime: '14:30', note: '國際通本店排隊', transportType: 'walk', transportTime: 30, openTime: '11:30-21:30' },
                    { id: 504, category: 'sightseeing', name: '上野動物園 或 銀座', startTime: '15:00', endTime: '18:00', note: '視時間決定', transportType: 'walk', transportTime: 20, ticketCost:'600', openTime: '09:30-17:00' },
                    { id: 505, category: 'shopping', name: '東京車站一番街', startTime: '18:30', endTime: '20:00', note: '伴手禮採買', transportType: 'walk', transportTime: 20, openTime: '10:00-20:00' }
                ],
                5: [ 
                    { id: 600, category: 'walk', name: '飯店 -> 早餐', startTime: '06:15', endTime: '06:30', note: '退房，前往麥當勞', transportType: 'walk', transportTime: 0 },
                    { id: 601, category: 'food', name: '麥當勞早餐', startTime: '06:30', endTime: '07:00', note: '飯店附近', transportType: 'public', transportTime: 30, openTime: '06:00-24:00' },
                    { id: 602, category: 'transport', name: 'JR 鶯谷 -> 東京', startTime: '07:30', endTime: '08:00', note: '前往車站等車', transportType: 'walk', transportTime: 30 },
                    { id: 603, category: 'transport', name: 'JR 東京 -> 成田機場', startTime: '09:14', endTime: '10:30', note: 'JR總武線快速 必須搭到!!', transportType: 'walk', transportTime: 0 },
                    { id: 604, category: 'flight', name: 'JX801 NRT->TPE', startTime: '13:45', endTime: '16:50', note: 'JX801 第二航廈出發', transportType: 'none', transportTime: 0 }
                ]
            };
            // 升級 key 到 v7
            const itineraryData = ref(JSON.parse(localStorage.getItem('zao_itinerary_2026_snow_v7')) || defaultItinerary);
            watch(itineraryData, () => localStorage.setItem('zao_itinerary_2026_snow_v7', JSON.stringify(itineraryData.value)), { deep: true });
            
            const currentDayItinerary = computed(() => itineraryData.value[selectedDayIndex.value] || []);
            // Helper Functions
            const isImportant = (n) => n && (n.includes('必須') || n.includes('必搭'));
            const getCategoryName = (c) => ({sightseeing:'景點',food:'美食',shopping:'購物',hotel:'住宿',flight:'航班',transport:'交通',walk:'步行'}[c]||'其他');
            
            // New Theme Function
            const getCategoryTheme = (c) => {
                const themes = {
                    sightseeing: { icon: 'fa-solid fa-camera', text: 'text-emerald-500', bgLight: 'bg-emerald-100', dot: 'bg-emerald-500' },
                    food: { icon: 'fa-solid fa-utensils', text: 'text-orange-500', bgLight: 'bg-orange-100', dot: 'bg-orange-500' },
                    shopping: { icon: 'fa-solid fa-bag-shopping', text: 'text-pink-500', bgLight: 'bg-pink-100', dot: 'bg-pink-500' },
                    hotel: { icon: 'fa-solid fa-bed', text: 'text-indigo-500', bgLight: 'bg-indigo-100', dot: 'bg-indigo-500' },
                    flight: { icon: 'fa-solid fa-plane', text: 'text-blue-500', bgLight: 'bg-blue-100', dot: 'bg-blue-500' },
                    transport: { icon: 'fa-solid fa-train-subway', text: 'text-sky-500', bgLight: 'bg-sky-100', dot: 'bg-sky-500' },
                    walk: { icon: 'fa-solid fa-person-walking', text: 'text-teal-500', bgLight: 'bg-teal-100', dot: 'bg-teal-500' }
                };
                return themes[c] || { icon: 'fa-solid fa-star', text: 'text-slate-400', bgLight: 'bg-slate-100', dot: 'bg-slate-300' };
            };
            const getCategoryColor = (c) => getCategoryTheme(c).dot;
            const getTransportIcon = (t) => ({walk:'fa-solid fa-person-walking',car:'fa-solid fa-car',public:'fa-solid fa-train-subway'}[t]||'fa-solid fa-arrow-right');
            const openMap = (q) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`, '_blank');
            
            // Icon Helper
            const getShoppingIcon = (name) => {
                if(!name) return 'fa-solid fa-bag-shopping';
                if(name.includes('衣') || name.includes('褲') || name.includes('服') || name.includes('UNIQLO') || name.includes('GU')) return 'fa-solid fa-shirt';
                if(name.includes('鞋') || name.includes('靴')) return 'fa-solid fa-shoe-prints';
                if(name.includes('藥') || name.includes('維他命') || name.includes('EVE') || name.includes('痛')) return 'fa-solid fa-capsules';
                if(name.includes('包')) return 'fa-solid fa-suitcase';
                if(name.includes('粧') || name.includes('水') || name.includes('乳') || name.includes('眉')) return 'fa-solid fa-wand-magic-sparkles';
                if(name.includes('吃') || name.includes('麵') || name.includes('餅') || name.includes('食')) return 'fa-solid fa-cookie-bite';
                if(name.includes('酒')) return 'fa-solid fa-wine-glass';
                if(name.includes('電') || name.includes('充')) return 'fa-solid fa-plug';
                return 'fa-solid fa-gift';
            };
            // --- Modals Logic ---
            const showItineraryModal = ref(false);
            const isEditing = ref(false);
            const editingIndex = ref(-1);
            const formItinerary = ref({});
            
            const openAddModal = () => { isEditing.value = false; formItinerary.value = {category:'sightseeing', transportType:'car', transportTime:15, openTime:''}; showItineraryModal.value = true; };
            const openEditModal = (item, idx) => { isEditing.value = true; editingIndex.value = idx; formItinerary.value = {...item}; showItineraryModal.value = true; };
            
            const saveItinerary = () => {
                if(!itineraryData.value[selectedDayIndex.value]) itineraryData.value[selectedDayIndex.value] = [];
                if(isEditing.value) itineraryData.value[selectedDayIndex.value][editingIndex.value] = {...formItinerary.value, id: Date.now()};
                else itineraryData.value[selectedDayIndex.value].push({...formItinerary.value, id: Date.now()});
                showItineraryModal.value = false;
            };
            
            const confirmDeleteItinerary = () => {
                if(confirm('確定要刪除這個行程嗎？此動作無法復原。')) {
                    itineraryData.value[selectedDayIndex.value].splice(editingIndex.value, 1);
                    showItineraryModal.value = false;
                }
            };
            // --- Other Tabs Logic ---
            const exchangeInput = ref('');
            const exchangeResult = computed(() => (parseFloat(exchangeInput.value || 0) * 0.22).toFixed(1));
            
            const hotels = [
                {name:'太陽城王子', note:'Day 1 · 池袋'}, {name:'山形 Super Hotel', note:'Day 2-3 · 天然溫泉'}, {name:'LANDABOUT TOKYO', note:'Day 4-5 · 鶯谷'}
            ];
            const currentListType = ref('todo');
            const listTypes = [{id:'todo',name:'待辦'},{id:'packing',name:'行李'},{id:'shopping',name:'購物'}];
            const currentListTypeName = computed(()=>listTypes.find(t=>t.id===currentListType.value)?.name);
            const lists = ref({todo:[],packing:[],shopping:[]});
            
            // Init Lists (v7)
            onMounted(() => {
                const saved = JSON.parse(localStorage.getItem('zao_lists_2026_snow_v7'));
                if(saved) lists.value = saved;
                else {
                    lists.value.todo = [
                        {name:'投保旅遊險 (6天)',checked:false}, 
                        {name:'日本網路 eSIM (6天)',checked:false}, 
                        {name:'KKDAY購買 利木津巴士 (機場→池袋)',checked:false}, 
                        {name:'VJW填寫 (入境審查)',checked:false},
                        {name:'確認護照效期 (至少6個月)',checked:false},
                        {name:'換日幣/準備信用卡',checked:false}
                    ];
                    lists.value.packing = [
                        {name:'免洗內褲 (男/女)',checked:false}, 
                        {name:'刮鬍刀',checked:false}, 
                        {name:'化妝包 (粉底、保濕、噴霧)',checked:false}, 
                        {name:'護照',checked:false}, 
                        {name:'發熱衣/褲',checked:false},
                        {name:'行動電源 & 充電線',checked:false},
                        {name:'雪靴/防滑鞋 (藏王必備)',checked:false},
                        {name:'墨鏡 (雪地防反光)',checked:false},
                        {name:'暖暖包 (大量)',checked:false},
                        {name:'個人常備藥品',checked:false}
                    ];
                    lists.value.shopping = [
                        {name:'發熱衣褲 (男/女)',checked:false}, 
                        {name:'洗髮精',checked:false}, 
                        {name:'DHC維他命',checked:false}, 
                        {name:'UNIQLO / GU 買衣服',checked:false}, 
                        {name:'眉粉',checked:false},
                        {name:'休足時間/貼布',checked:false},
                        {name:'EVE止痛藥/感冒藥',checked:false}
                    ];
                }
            });
            // Update storage key to v7
            watch(lists, ()=>localStorage.setItem('zao_lists_2026_snow_v7', JSON.stringify(lists.value)), {deep:true});
            // List Modal
            const showListModal = ref(false);
            const formList = ref({name:'', image:null});
            const openListModal = () => { formList.value = {name:'', image:null}; showListModal.value = true; };
            const handleListImage = (e) => { const f=e.target.files[0]; if(f){const r=new FileReader(); r.onload=(ev)=>formList.value.image=ev.target.result; r.readAsDataURL(f);} };
            const saveListItem = () => { lists.value[currentListType.value].push({...formList.value, checked:false}); showListModal.value=false; };
            const deleteListItem = (type, idx) => { if(confirm('刪除?')) lists.value[type].splice(idx, 1); };
            
            // New Packing
            const newPackingItem = ref('');
            const quickAddPacking = () => { if(newPackingItem.value) { lists.value.packing.push({name:newPackingItem.value, checked:false}); newPackingItem.value=''; }};
            // Recommendation
            const recommendations = [
                {name:'樹冰羅曼', city:'山形', icon:'  🏔  ️'}, {name:'乃し梅', city:'山形', icon:'  🍑  '}, 
                {name:'萩之月', city:'仙台', icon:'  🌕  '}, {name:'喜久福', city:'仙台', icon:'  🍵  '},
                {name:'NY Cheese', city:'東京', icon:'  🧀  '}, {name:'Press Butter', city:'東京', icon:'  🍪  '}
            ];
            const addRecItem = (rec) => {
                if(confirm(`加入 ${rec.name} ?`)) lists.value.shopping.push({name:rec.name, image:null, checked:false});
            };
            
            // --- Expenses Logic Updated for Multi-Currency ---
            const showExpenseModal = ref(false);
            // 升級 Storage Key，避免資料衝突
            const expenses = ref(JSON.parse(localStorage.getItem('zao_expenses_2026_snow_v2')) || []);
            const formExpense = ref({});
            const expenseCategories = [{val:'transport',label:'交通'},{val:'food',label:'飲食'},{val:'hotel',label:'住宿'},{val:'shopping',label:'購物'},{val:'other',label:'其他'}];
            
            // 匯率常數
            const RATE_JPY_TO_TWD = 0.22;
            
            // 1. 計算總台幣 (所有項目都換算成台幣加總)
            const totalExpensesTWD = computed(() => {
                return expenses.value.reduce((total, item) => {
                    let amount = parseInt(item.amount || 0);
                    // 如果是日幣，乘以匯率變成台幣 (並四捨五入)
                    if (item.currency === 'JPY') {
                        return total + Math.round(amount * RATE_JPY_TO_TWD);
                    }
                    // 如果是台幣，直接加
                    return total + amount;
                }, 0);
            });

            // 2. 計算總日幣 (所有項目都換算成日幣加總，顯示用)
            const totalExpensesJPY = computed(() => {
                return expenses.value.reduce((total, item) => {
                    let amount = parseInt(item.amount || 0);
                    // 如果是台幣，除以匯率變成日幣 (並四捨五入)
                    if (item.currency === 'TWD') {
                        return total + Math.round(amount / RATE_JPY_TO_TWD);
                    }
                    // 如果是日幣，直接加
                    return total + amount;
                }, 0);
            });

            // 3. 分類統計：現金 vs 信用卡 (都以台幣計算)
            const expenseStats = computed(() => {
                let cash = 0;
                let card = 0;
                
                expenses.value.forEach(item => {
                    let amount = parseInt(item.amount || 0);
                    let valInTWD = 0;

                    // 統一換算成台幣
                    if (item.currency === 'JPY') {
                        valInTWD = Math.round(amount * RATE_JPY_TO_TWD);
                    } else {
                        valInTWD = amount;
                    }

                    if (item.payment === '信用卡') {
                        card += valInTWD;
                    } else {
                        cash += valInTWD;
                    }
                });
                return { cash, card };
            });

            const sortedExpenses = computed(()=>[...expenses.value].reverse());
            
            const openExpenseModal = () => { 
                // 預設 currency 為 JPY
                formExpense.value = {
                    currency: 'JPY',
                    category: 'food',
                    name: '',
                    amount: '',
                    payment: '現金',
                    date: tripDays[selectedDayIndex.value].fullDate
                }; 
                showExpenseModal.value = true; 
            };
            
            const saveExpense = () => { 
                expenses.value.push({...formExpense.value}); 
                localStorage.setItem('zao_expenses_2026_snow_v2', JSON.stringify(expenses.value)); 
                showExpenseModal.value = false; 
            };
            
            const deleteExpense = (idx) => { 
                if(confirm('刪除?')) { 
                    expenses.value.splice(expenses.value.length - 1 - idx, 1); 
                    localStorage.setItem('zao_expenses_2026_snow_v2', JSON.stringify(expenses.value)); 
                }
            };
            
            const getExpenseColor = (c) => ({transport:'bg-orange-400',food:'bg-red-400',hotel:'bg-indigo-400',shopping:'bg-purple-400'}[c]||'bg-slate-400');
            const getExpenseIcon = (c) => ({transport:'fa-solid fa-train',food:'fa-solid fa-utensils',hotel:'fa-solid fa-bed',shopping:'fa-solid fa-bag-shopping'}[c]||'fa-solid fa-coins');
            
            return {
                currentTab, tabs, coverImage, triggerFileInput, handleImageUpload, fileInput,
                tripDays, selectedDayIndex, weatherInfo,
                currentDayItinerary, isImportant, getCategoryName, getCategoryColor, getCategoryTheme, getTransportIcon, openMap,
                showItineraryModal, isEditing, formItinerary, openAddModal, openEditModal, saveItinerary, confirmDeleteItinerary,
                exchangeInput, exchangeResult, hotels,
                currentListType, listTypes, currentListTypeName, lists, showListModal, formList, openListModal, handleListImage, saveListItem, deleteListItem, 
                newPackingItem, quickAddPacking, recommendations, addRecItem,
                expenses, sortedExpenses, totalExpensesJPY, totalExpensesTWD, expenseStats, showExpenseModal, formExpense, expenseCategories, openExpenseModal, saveExpense, deleteExpense, getExpenseColor, getExpenseIcon,
                getShoppingIcon, handleImageError, resetCover
            };
        }
    }).mount('#app');
</script>

</body></html>